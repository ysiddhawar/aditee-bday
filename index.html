<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aditee 23 | Project Style</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Playfair+Display:ital,wght@0,700;1,700&display=swap');
        
        :root { --pink: #ff2d55; --cyan: #00f2ff; --gold: #ffd700; }
        body, html { margin: 0; padding: 0; background: #000; color: #fff; font-family: 'Space Mono', monospace; overflow: hidden; height: 100vh; }
        
        canvas { position: fixed; top: 0; left: 0; z-index: 1; pointer-events: none; }
        .ui-layer { position: relative; z-index: 10; height: 100vh; width: 100vw; display: flex; flex-direction: column; justify-content: center; align-items: center; background: radial-gradient(circle, transparent, #000); }
        
        .scene { display: none; width: 90%; max-width: 800px; animation: fadeIn 1.5s ease; }
        .active { display: block; }

        /* Stage 1: Terminal */
        .terminal-text { color: var(--cyan); text-shadow: 0 0 10px var(--cyan); font-size: 1.2rem; margin-bottom: 20px; }
        .glow-btn { background: none; border: 2px solid var(--pink); color: var(--pink); padding: 15px 40px; font-size: 1.2rem; cursor: pointer; transition: 0.3s; box-shadow: 0 0 15px var(--pink); text-transform: uppercase; letter-spacing: 5px; }
        .glow-btn:hover { background: var(--pink); color: white; }

        /* Stage 5: Dashboard */
        .stat-card { background: rgba(255,255,255,0.05); border-left: 5px solid var(--cyan); padding: 15px; margin: 10px; border-radius: 4px; backdrop-filter: blur(5px); }
        
        /* Stage 6: Coupon */
        #coupon-box { 
            background: linear-gradient(45deg, #1a1a1a, #222); border: 4px solid var(--gold); 
            padding: 40px; border-radius: 0; position: relative; font-family: 'Playfair Display', serif;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }
        .photo-strip { display: flex; gap: 10px; margin-bottom: 20px; justify-content: center; }
        .photo-strip img { width: 80px; height: 80px; border: 2px solid #fff; object-fit: cover; transform: rotate(-5deg); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<audio id="bdaySong" loop preload="auto">
    <source src="style.mp3" type="audio/mpeg">
</audio>
<canvas id="mainCanvas"></canvas>

<div class="ui-layer">
    <div id="stage1" class="scene active">
        <div class="terminal-text" id="typewriter"></div>
        <button class="glow-btn" onclick="initiateSequence()">START RENDERING</button>
    </div>

    <div id="stage2" class="scene">
        <h1 style="font-size: 4rem; color: var(--pink);" id="decryptWord">010101</h1>
        <p>RE-WRITING REALITY... 2026.02.04</p>
    </div>

    <div id="stage3" class="scene">
        <h2 style="font-family: 'Playfair Display'; font-size: 2.5rem;">The Aditee Nebula</h2>
        <p>Touch the stars to find the message...</p>
        <button class="glow-btn" style="margin-top: 200px;" onclick="goToStage4()">NEXT PHASE</button>
    </div>

    <div id="stage4" class="scene">
        <h2 style="color: var(--pink)">STITCH THE HEART</h2>
        <p>Tap around the center to crochet your gift</p>
        <div style="height: 300px;"></div> <button class="glow-btn" id="finishCrochet" style="display:none;" onclick="goToStage5()">VIEW STATS</button>
    </div>

    <div id="stage5" class="scene">
        <h1 style="color: var(--cyan)">THE STYLE ALGORITHM</h1>
        <div class="stat-card">DESIGN AESTHETIC: âˆž / 10</div>
        <div class="stat-card">CROCHET COMPLEXITY: MASTER LEVEL</div>
        <div class="stat-card">VIBE: "NEVER GO OUT OF STYLE"</div>
        <div class="stat-card">PROBABILITY OF PERFECT DAY: 100%</div>
        <button class="glow-btn" style="margin-top: 20px;" onclick="goToStage6()">FINALIZE EXPORT</button>
    </div>

    <div id="stage6" class="scene" style="overflow-y: auto;">
        <div id="coupon-box">
            <div class="photo-strip">
                <img src="https://i.postimg.cc/zXz69yYL/Whats-App-Image-2026-02-03-at-16-37-40.jpg" alt="Aditee">
                <img src="https://i.postimg.cc/pdspJhv1/Whats-App-Image-2026-02-03-at-16-37-43.jpg" alt="Us">
                <img src="https://i.postimg.cc/bJG15czz/Whats-App-Image-2026-02-03-at-16-37-43-(1).jpg" alt="Memory">
            </div>
            <h2 style="color: var(--gold)">Yash's Love Coupon</h2>
            <p>Happy 23rd Birthday, Aditee.</p>
            <h1 style="font-size: 1.5rem; border-top: 1px solid var(--gold); padding-top: 10px;">30 MINS OF MAKING LOVE</h1>
            <p style="font-size: 0.8rem; opacity: 0.7;">Redeemable immediately. Expiring soon.</p>
        </div>
        <button class="glow-btn" style="margin-top: 20px;" onclick="download()">DOWNLOAD GIFT</button>
    </div>
</div>

<script>
    const canvas = document.getElementById('mainCanvas');
    const ctx = canvas.getContext('2d');
    let mode = 'matrix';
    let particles = [];
    let stitches = [];

    // Setup Canvas
    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    // Typewriter Effect for Stage 1
    const text = "> Loading Aditee_Project_2026...\n> Analyzing designer personality...\n> Found: 100% Creativity, 100% Love.\n> Ready for the 23rd Birthday Render?";
    let i = 0;
    function type() {
        if (i < text.length) {
            document.getElementById('typewriter').innerHTML += text.charAt(i) === '\n' ? '<br>' : text.charAt(i);
            i++;
            setTimeout(type, 30);
        }
    }
    type();

// This variable keeps track if the music has already started
    let musicStarted = false;

    function initiateSequence() {
        const music = document.getElementById('bdaySong');
        
        // Only play if it hasn't started yet to prevent "looping tunes"
        if (!musicStarted) {
            music.play().catch(e => console.log("Playback error:", e));
            musicStarted = true;
        }

        showStage(2);
        mode = 'decrypt';
        
        let words = ["ANIMATOR", "DESIGNER", "CROCHET QUEEN", "ADITEE", "23"];
        let count = 0;
        let interval = setInterval(() => {
            document.getElementById('decryptWord').innerText = words[count % words.length];
            count++;
            if(count > 20) { // Increased count for a cooler effect
                clearInterval(interval);
                goToStage3();
            }
        }, 150);
    }

    function goToStage3() { showStage(3); mode = 'nebula'; createParticles(); }
    function goToStage4() { showStage(4); mode = 'crochet'; document.body.style.pointerEvents = 'auto'; }
    function goToStage5() { showStage(5); mode = 'dashboard'; }
    function goToStage6() { showStage(6); mode = 'finale'; confettiAnimation(); }

    function showStage(num) {
        document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));
        document.getElementById('stage' + num).classList.add('active');
    }

    // Animation Loop
    function animate() {
        ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        if (mode === 'matrix' || mode === 'decrypt') {
            ctx.fillStyle = '#0f0';
            for(let j=0; j<20; j++) {
                ctx.fillText(Math.random() > 0.5 ? "1" : "0", Math.random()*canvas.width, Math.random()*canvas.height);
            }
        } else if (mode === 'nebula') {
            particles.forEach(p => {
                p.x += p.vx; p.y += p.vy;
                ctx.fillStyle = `rgba(0, 242, 255, ${p.alpha})`;
                ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
            });
        } else if (mode === 'crochet') {
            stitches.forEach(s => {
                ctx.strokeStyle = '#ff2d55'; ctx.lineWidth = 3;
                ctx.beginPath(); ctx.arc(s.x, s.y, 15, 0, Math.PI * 1.5); ctx.stroke();
            });
        }
        requestAnimationFrame(animate);
    }
    animate();

    function createParticles() {
        for(let j=0; j<100; j++) {
            particles.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, vx: Math.random()*2-1, vy: Math.random()*2-1, r: Math.random()*3, alpha: Math.random()});
        }
    }

    window.addEventListener('mousedown', (e) => {
        if(mode === 'crochet') {
            stitches.push({x: e.clientX, y: e.clientY});
            if(stitches.length > 12) document.getElementById('finishCrochet').style.display = 'inline-block';
        }
    });

    function download() {
        html2canvas(document.querySelector("#coupon-box")).then(canvas => {
            let link = document.createElement('a');
            link.download = 'Aditee_Bday_Gift.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    function confettiAnimation() {
        // Confetti logic simplified for performance
        mode = 'finale';
    }
</script>
</body>
</html>
